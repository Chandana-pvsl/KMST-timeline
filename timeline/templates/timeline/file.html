{% extends "timeline/home.html" %}
{% block content %}

<script type="text/javascript">
	var articles = [];
	var id = 1;
	{% for c in content %}
		// var parser = new DOMParser();
		// var dom = parser.parseFromString({{c}}, 'text/html');
		// var decodedString = dom.body.textContent;
		// console.log('{{c}}')
		var newArticle = {};
		var decodedString = '{{c}}'.split('&#39;').join('\"');
		// console.log(decodedString);
		var parsed_dict = JSON.parse(decodedString);
		newArticle.id = id;
		id++;
		newArticle.title = parsed_dict['itemLabel']['value'];
		var data = {};
		var launchDate = parsed_dict['launchdate']['value'];
		launchDate = launchDate.split("-");
		data.year = parseInt(launchDate[0],10);
		data.month = parseInt(launchDate[1],10);
		data.day = parseInt(launchDate[2].split("T")[0],10);
		data.precision = Histropedia.PRECISION_DAY;
		newArticle.from = data;
		if('image' in parsed_dict){
			newArticle.imageUrl = (parsed_dict['image']['value']);
		}
		// console.log(newArticle);
		articles.push(newArticle);
	{% endfor %}

	var div_container = document.getElementById("timelineJS");
	var myTimeline = new Histropedia.Timeline(div_container,{});
	console.log(articles);
	myTimeline.load(articles);
	myTimeline.redraw();

</script>
{% endblock %}



